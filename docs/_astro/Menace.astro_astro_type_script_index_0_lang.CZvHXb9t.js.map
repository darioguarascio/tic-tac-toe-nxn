{"version":3,"file":"Menace.astro_astro_type_script_index_0_lang.CZvHXb9t.js","sources":["../../src/components/Menace.astro?astro&type=script&index=0&lang.ts"],"sourcesContent":["window.playerWorker = new Worker(new URL('../workers/player.ts', import.meta.url), {type: 'module'})\nwindow.gameWorker = new Worker(new URL('../workers/game.ts', import.meta.url), {type: 'module'});\n\nwindow.gameWorker.onmessage = (event) => {\n  window.dispatchEvent(new CustomEvent(\"gamemsg\", { \"detail\": event.data } ));\n};\n\nwindow.playerWorker.onmessage = (event) => {\n  window.dispatchEvent(new CustomEvent(\"playermsg\", { \"detail\": event.data } ));\n};\n\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyAidmVyc2lvbiI6IDMsICJzb3VyY2VzIjogWyIvYS9tZW5hY2UtbnhuL3NyYy9jb21wb25lbnRzL01lbmFjZS5hc3RybyJdLCAic291cmNlc0NvbnRlbnQiOiBbIi0tLVxuaW1wb3J0ICcuLi9zdHlsZXMvZ2xvYmFsLmNzcyc7XG4tLS1cblxuXG5cdTAwM2NkaXYgaWQ9XCJtZW5hY2VcIiBjbGFzcz1cImNvbnRhaW5lciBtdC0xMFwiIHgtc2hvdz1cInZpc2libGVcIlxuICB4LWRhdGE9XCJtZW5hY2VcIlxuICB4LWNsb2FrXG4gIEBuZXdnYW1lLndpbmRvdz1cInZpc2libGUgPSB0cnVlOyBuZXdHYW1lKCRldmVudClcIlxuICBAZ2FtZW1zZy53aW5kb3c9XCJnYW1lKCRldmVudClcIlxuICBAcGxheWVybXNnLndpbmRvdz1cInBsYXllcigkZXZlbnQpXCJcblx1MDAzZVxuXG5cbiAgXHUwMDNjaDMgY2xhc3M9XCJqdXN0aWZ5LWNlbnRlciBmbGV4IGZsZXgtcm93IGdhcC14LTZcIlx1MDAzZVxuICAgIFx1MDAzY3NwYW5cdTAwM2VcdTAwM2NzdHJvbmcgY2xhc3M9XCJmb250LWJvbGQgdGV4dC1yZWQtNTAwXCJcdTAwM2VPXHUwMDNjL3N0cm9uZ1x1MDAzZSBQbGF5ZXI6IFx1MDAzY3NwYW4geC10ZXh0PVwic3RhdHMucGxheWVyXCJcdTAwM2VcdTAwM2Mvc3Bhblx1MDAzZVx1MDAzYy9zcGFuXHUwMDNlXG4gICAgXHUwMDNjc3Bhblx1MDAzZVx1MDAzY3N0cm9uZyBjbGFzcz1cImZvbnQtYm9sZCB0ZXh0LWJsdWUtNTAwXCJcdTAwM2VYXHUwMDNjL3N0cm9uZ1x1MDAzZSBNYWNoaW5lOiBcdTAwM2NzcGFuIHgtdGV4dD1cInN0YXRzLm1hY2hpbmVcIlx1MDAzZVx1MDAzYy9zcGFuXHUwMDNlXHUwMDNjL3NwYW5cdTAwM2VcbiAgICBcdTAwM2NzcGFuXHUwMDNlRHJhd3M6IFx1MDAzY3NwYW4geC10ZXh0PVwic3RhdHMuZHJhd3NcIlx1MDAzZVx1MDAzYy9zcGFuXHUwMDNlXHUwMDNjL3NwYW5cdTAwM2VcbiAgXHUwMDNjL2gzXHUwMDNlXG4gIFx1MDAzY2RpdiBjbGFzcz1cImZsZXggZmxleC1yb3cganVzdGlmeS1jZW50ZXJcIlx1MDAzZVxuICAgIFx1MDAzY2RpdiBjbGFzcz1cImZsZXggZmxleC1jb2wgZ2FwLXktNCBtdC0xMFwiXHUwMDNlXG4gICAgICBcdTAwM2NidXR0b25cbiAgICAgICAgQGNsaWNrPVwidG9nZ2xlKCRlbClcIlxuICAgICAgICBpZD1cInRvZ2dsZS1zd2l0Y2hcIiB0eXBlPVwiYnV0dG9uXCIgcm9sZT1cInN3aXRjaFwiIDphcmlhLWNoZWNrZWQ9XCJ0cmFpblwiIGNsYXNzPVwiZ3JvdXAgZmxleCB3LTE0IGgtOCBwLTEgcm91bmRlZC1mdWxsIGJnLXNsYXRlLTQwMCB0cmFuc2l0aW9uLWNvbG9ycyBkdXJhdGlvbi0yMDAgZWFzZS1pbi1vdXQgb3ZlcmZsb3ctaGlkZGVuIG91dGxpbmUtbm9uZSBmb2N1cy12aXNpYmxlOnJpbmcgZm9jdXMtdmlzaWJsZTpyaW5nLXB1cnBsZS00MDAgYXJpYS1jaGVja2VkOmJnLWJsdWUtNDAwXCJcdTAwM2VcbiAgICAgICAgXHUwMDNjc3BhbiBjbGFzcz1cInctNiBoLTYgcm91bmRlZC1mdWxsIGJnLXdoaXRlIHRyYW5zaXRpb24tdHJhbnNmb3JtIGR1cmF0aW9uLTIwMCBlYXNlLWluLW91dCBncm91cC1hcmlhLWNoZWNrZWQ6dHJhbnNsYXRlLXgtZnVsbFwiXHUwMDNlXHUwMDNjL3NwYW5cdTAwM2VcbiAgICAgIFx1MDAzYy9idXR0b25cdTAwM2VcbiAgICAgIFx1MDAzY2xhYmVsIGlkPVwidG9nZ2xlLXN3aXRjaC1sYWJlbFwiIGZvcj1cInRvZ2dsZS1zd2l0Y2hcIlx1MDAzZVxuICAgICAgICBBdXRvcGxheSAocmFuZG9tKVxuICAgICAgXHUwMDNjL2xhYmVsXHUwMDNlXG4gICAgXHUwMDNjL2Rpdlx1MDAzZVxuICBcdTAwM2MvZGl2XHUwMDNlXG5cbiAgXHUwMDNjZGl2IGNsYXNzPVwibXQtMTAgZmxleCBmbGV4LXJvdyBqdXN0aWZ5LWNlbnRlciBpdGVtcy1zdGFydCBnYXAteC0xMlwiXHUwMDNlXG4gICAgXHUwMDNjZGl2XHUwMDNlXG4gICAgICBcdTAwM2NkaXYgY2xhc3M9XCJib3JkZXIgcm91bmRlZC1sZyBzaGFkb3ctbGcgcC00IG10LTRcIlx1MDAzZVxuXG4gICAgICAgIFx1MDAzY2RpdlxuICAgICAgICAgICAgIHgtcmVmPVwiZ3JpZFwiXG4gICAgICAgICAgICAgaWQ9XCJncmlkXCJcbiAgICAgICAgICAgICA6Y2xhc3M9XCInZ3JpZC1jb2xzLScgKyBzaXplXCJcbiAgICAgICAgICAgICA6c3R5bGU9XCInd2lkdGg6ICcgKyAoKDIwICogNCAqIHNpemUpICsgKDEyICogKHNpemUtMSkpKSArICdweCdcIlx1MDAzZVxuXG4gICAgICAgICAgXHUwMDNjdGVtcGxhdGUgeC1mb3I9XCJpIGluIHNpemUqc2l6ZVwiXHUwMDNlXG4gICAgICAgICAgICBcdTAwM2NkaXYgY2xhc3M9XCJjZWxsXCJcbiAgICAgICAgICAgICAgICAgZGF0YS1lbXB0eT1cIjFcIlxuICAgICAgICAgICAgICAgICA6ZGF0YS1jZWxsPVwiaVwiXG4gICAgICAgICAgICAgICAgIDppZD1cIidjZWxsLScgKyAoaS0xKVwiXG4gICAgICAgICAgICAgICAgIEBjbGljaz1cIm1vdmUoaSlcIlx1MDAzZVxuICAgICAgICAgICAgXHUwMDNjL2Rpdlx1MDAzZVxuICAgICAgICAgIFx1MDAzYy90ZW1wbGF0ZVx1MDAzZVxuXG4gICAgICAgIFx1MDAzYy9kaXZcdTAwM2VcblxuXG5cbiAgICAgIFx1MDAzYy9kaXZcdTAwM2VcbiAgICBcdTAwM2MvZGl2XHUwMDNlXG4gIFx1MDAzYy9kaXZcdTAwM2VcblxuICAgXHUwMDNjZGl2XHUwMDNlXG4gICAgXHUwMDNjaDMgY2xhc3M9XCJcIlx1MDAzZU1vdmVzIGFuZCBzY29yZXNcdTAwM2MvaDNcdTAwM2VcbiAgICBcdTAwM2NkaXYgaWQ9XCJtb3Zlc1wiIHgtcmVmPVwibW92ZXNcIiBjbGFzcz1cImZsZXggZmxleC1yb3cgZ2FwLXgtMyBtdC00IGgtMTZcIlx1MDAzZVx1MDAzYy9kaXZcdTAwM2VcbiAgXHUwMDNjL2Rpdlx1MDAzZVxuXG4gIFx1MDAzYyEtLSBcdTAwM2NidXR0b24gQGNsaWNrPVwicGFpbnRSb3coMSlcIlx1MDAzZXBhaW50XHUwMDNjL2J1dHRvblx1MDAzZSAtLVx1MDAzZVxuXHUwMDNjL2Rpdlx1MDAzZVxuXG5cblxuXHUwMDNjc2NyaXB0XHUwMDNlXG5cblxud2luZG93LnBsYXllcldvcmtlciA9IG5ldyBXb3JrZXIobmV3IFVSTCgnLi4vd29ya2Vycy9wbGF5ZXIudHMnLCBpbXBvcnQubWV0YS51cmwpLCB7dHlwZTogJ21vZHVsZSd9KVxud2luZG93LmdhbWVXb3JrZXIgPSBuZXcgV29ya2VyKG5ldyBVUkwoJy4uL3dvcmtlcnMvZ2FtZS50cycsIGltcG9ydC5tZXRhLnVybCksIHt0eXBlOiAnbW9kdWxlJ30pO1xuXG53aW5kb3cuZ2FtZVdvcmtlci5vbm1lc3NhZ2UgPSAoZXZlbnQpID1cdTAwM2Uge1xuICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJnYW1lbXNnXCIsIHsgXCJkZXRhaWxcIjogZXZlbnQuZGF0YSB9ICkpO1xufTtcblxud2luZG93LnBsYXllcldvcmtlci5vbm1lc3NhZ2UgPSAoZXZlbnQpID1cdTAwM2Uge1xuICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJwbGF5ZXJtc2dcIiwgeyBcImRldGFpbFwiOiBldmVudC5kYXRhIH0gKSk7XG59O1xuXG5cdTAwM2Mvc2NyaXB0XHUwMDNlXG5cblxuXHUwMDNjc2NyaXB0IGlzOmlubGluZVx1MDAzZVxuXG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2FscGluZTppbml0JywgKCkgPVx1MDAzZSB7XG5cblxuICBBbHBpbmUuZGF0YSgnbWVuYWNlJywgKCkgPVx1MDAzZSAoe1xuICAgIHZpc2libGU6IGZhbHNlLFxuXG4gICAgc3BlZWQ6IDUsXG4gICAgdHJhaW46IGZhbHNlLFxuXG4gICAgc2l6ZTogMCwgc3RyaWtlOiAwLCBtb3ZlU3RyYXRlZ3k6IG51bGwsIGF1dG9wbGF5ZXI6IG51bGwsIGxlYXJuaW5nOiBudWxsLCB0cmFpbmluZzogbnVsbCwgZmlyc3RQbGF5ZXI6IGZhbHNlLFxuXG4gICAgc3RhdGU6IFtdLFxuICAgIG1vdmVzOiBbXSxcbiAgICBzdGF0czoge1xuICAgICAgcGxheWVyOiAwLFxuICAgICAgbWFjaGluZTogMCxcbiAgICAgIGRyYXdzOiAwLFxuICAgIH0sXG5cbiAgICB0b2dnbGUoYnRuKSB7XG4gICAgICBpZiAoYnRuLmdldEF0dHJpYnV0ZShcImFyaWEtY2hlY2tlZFwiKSA9PT0gXCJ0cnVlXCIpIHtcbiAgICAgICAgYnRuLnNldEF0dHJpYnV0ZShcImFyaWEtY2hlY2tlZFwiLCBcImZhbHNlXCIpO1xuICAgICAgICB0aGlzLnRyYWluID0gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBidG4uc2V0QXR0cmlidXRlKFwiYXJpYS1jaGVja2VkXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgdGhpcy50cmFpbiA9IHRydWU7XG4gICAgICAgIHRoaXMucGxheSgpO1xuICAgICAgfVxuXG4gICAgfSxcbiAgICBuZXdHYW1lKGUpIHtcbiAgICAgIGNvbnN0IGNvbmZpZyA9IGUuZGV0YWlsO1xuICAgICAgdGhpcy5zaXplID0gY29uZmlnWzBdO1xuICAgICAgdGhpcy5zdHJpa2VTaXplID0gY29uZmlnWzFdO1xuICAgICAgdGhpcy5tb3ZlU3RyYXRlZ3kgPSBjb25maWdbMl07XG4gICAgICB0aGlzLmF1dG9wbGF5ZXIgPSBjb25maWdbM107XG4gICAgICB0aGlzLmxlYXJuaW5nID0gY29uZmlnWzRdO1xuICAgICAgdGhpcy50cmFpbmluZyA9IGNvbmZpZ1s1XTtcblxuICAgICAgd2luZG93LmdhbWVXb3JrZXIucG9zdE1lc3NhZ2UoWydUUkFJTklORycsIHRoaXMudHJhaW5pbmcgXSlcblxuICAgICAgc2V0VGltZW91dCh0aGlzLnJlc3RhcnQuYmluZCh0aGlzKSwgMTAwKVxuICAgIH0sXG5cblxuICAgIHJlc3RhcnQoKSB7XG4gICAgICB0aGlzLnJlc2V0KClcbiAgICB9LFxuXG4gICAgcmVzZXQoZSkge1xuICAgICAgd2luZG93LmdhbWVXb3JrZXIucG9zdE1lc3NhZ2UoWydORVdfR0FNRScsIHRoaXMuc2l6ZSwgdGhpcy5zdHJpa2VTaXplIF0pXG4gICAgICB0aGlzLiRyZWZzLm1vdmVzLmlubmVySFRNTCA9Jyc7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSBcdTAwM2MgKHRoaXMuc2l6ZSAqIHRoaXMuc2l6ZSk7IGkrKykge1xuICAgICAgICB0aGlzLmdldENlbGwoaSkuY2xhc3NMaXN0LnJlbW92ZSgnZHJhdycpXG4gICAgICAgIHRoaXMuZ2V0Q2VsbChpKS5jbGFzc0xpc3QucmVtb3ZlKCd3aW5uZXInKVxuICAgICAgfVxuICAgICAgLy8gdGhpcy5wYWludCgpXG4gICAgICBzZXRUaW1lb3V0KHRoaXMucGxheS5iaW5kKHRoaXMpLCB0aGlzLnNwZWVkKVxuXG4gICAgfSxcblxuICAgIGdldENlbGwoaSkge1xuICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCNjZWxsLSR7aX1gKVxuICAgIH0sXG5cblxuICAgIHBsYXllcihlKSB7XG4gICAgICBjb25zdCBtb3ZlID0gZS5kZXRhaWw7XG5cbiAgICAgIGlmICggdHlwZW9mKG1vdmUpICE9ICdudW1iZXInICkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnN0YXRlLmpvaW4oJycpKVxuICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmF1dG9wbGF5ZXIpXG4gICAgICAgIHdpbmRvdy5wbGF5ZXJXb3JrZXIucG9zdE1lc3NhZ2UoWyB0aGlzLmF1dG9wbGF5ZXIsIHRoaXMuc3RhdGUuam9pbignJyksIHRoaXMuc3RyaWtlU2l6ZSBdKVxuXG4gICAgICAgIC8vIHRocm93IG5ldyBFcnJvcignbWlzc2luZyBtb3ZlJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc3RhdGVbIG1vdmUgXSA9IDA7XG4gICAgICAgIHRoaXMucGFpbnQoKTtcbiAgICAgICAgd2luZG93LmdhbWVXb3JrZXIucG9zdE1lc3NhZ2UoWydNT1ZFJywgbW92ZV0pXG4gICAgICB9XG4gICAgfSxcblxuICAgIGdhbWUoZSkge1xuICAgICAgc3dpdGNoIChlLmRldGFpbFswXSkge1xuICAgICAgICBjYXNlIFwiVFJBSU5fREFUQVwiOlxuICAgICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KGUuZGV0YWlsWzFdKSlcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwiTkVXX0dBTUVcIjpcbiAgICAgICAgICB0aGlzLnN0YXRlID0gZS5kZXRhaWxbMV0uc3RhdGVcbiAgICAgICAgICB0aGlzLnBhaW50KClcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwiU1RBVEVcIjpcbiAgICAgICAgICBsZXQgc3RhdGUgPSBBcnJheS5mcm9tKGUuZGV0YWlsWzFdLnN0YXRlKTtcbiAgICAgICAgICB0aGlzLnN0YXRlID0gZS5kZXRhaWxbMV0uc3RhdGVcblxuICAgICAgICAgIHRoaXMucGFpbnQoKVxuXG4gICAgICAgICAgdGhpcy4kcmVmcy5tb3Zlcy5pbm5lckhUTUwgPSAnJztcblxuXG4gICAgICAgICAgZm9yIChsZXQgbW92ZSBvZiBlLmRldGFpbFsxXS5tb3Zlcykge1xuICAgICAgICAgICAgbGV0IGJlZm9yZU1vdmVTdGF0ZSA9IEFycmF5LmZyb20oc3RhdGUpXG4gICAgICAgICAgICBiZWZvcmVNb3ZlU3RhdGVbIGUuZGV0YWlsWzFdLm1vdmUgXSA9IDI7XG4gICAgICAgICAgICBiZWZvcmVNb3ZlU3RhdGVbIG1vdmVbMF0gXSA9IDE7XG5cbiAgICAgICAgICAgIGxldCBjID0gdGhpcy50aHVtYm5haWwoYmVmb3JlTW92ZVN0YXRlLCBtb3ZlWzBdLCA1MCk7XG4gICAgICAgICAgICBsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgICAgICAgIGxldCBzY29yZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKVxuICAgICAgICAgICAgc2NvcmUuaW5uZXJIVE1MID0gbW92ZVsxXVxuICAgICAgICAgICAgZGl2LmFwcGVuZENoaWxkKHNjb3JlKVxuICAgICAgICAgICAgZGl2LmFwcGVuZENoaWxkKGMpXG4gICAgICAgICAgICAvLyBwLmFwcGVuZENoaWxkKCk7XG5cbiAgICAgICAgICAgIHRoaXMuJHJlZnMubW92ZXMuYXBwZW5kQ2hpbGQoZGl2KVxuICAgICAgICAgIH1cblxuXG4gICAgICAgICAgc2V0VGltZW91dCh0aGlzLnBsYXkuYmluZCh0aGlzKSwgdGhpcy5zcGVlZClcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwiRU5EXCI6XG4gICAgICAgICAgdGhpcy5zdGF0ZSA9IGUuZGV0YWlsWzFdLnN0YXRlXG4gICAgICAgICAgdGhpcy5wYWludCgpXG4gICAgICAgICAgdGhpcy4kcmVmcy5tb3Zlcy5pbm5lckhUTUwgPScnO1xuICAgICAgICAgIGNvbnN0IGRhdGEgPSBlLmRldGFpbFsxXVxuICAgICAgICAgIC8vIHNldFRpbWVvdXQoIHRoaXMucmVzZXQuYmluZCh0aGlzKSAsIDUwMClcbiAgICAgICAgICAvLyBsZXQgZGF0YSA9IGF3YWl0IHJlc3AuanNvbigpO1xuICAgICAgICAgIHRoaXMuc3RhdHMgPSBkYXRhLnN0YXRzO1xuICAgICAgICAgIHVwZGF0ZUNoYXJ0KGRhdGEuc3RhdHMpXG4gICAgICAgICAgLy8gdGhpcy5zdGF0ZSA9IGRhdGEuc3RhdGU7XG4gICAgICAgICAgLy8gdGhpcy5wYWludCgpXG4gICAgICAgICAgaWYgKGRhdGEud2lubmVyID09PSBcImRyYXdcIikge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgXHUwMDNjICh0aGlzLnNpemUgKiB0aGlzLnNpemUpOyBpKyspIHtcbiAgICAgICAgICAgICAgdGhpcy5nZXRDZWxsKGkpLmNsYXNzTGlzdC5hZGQoJ2RyYXcnKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvciAobGV0IGkgb2YgZGF0YS5zdHJpa2UpIHtcbiAgICAgICAgICAgICAgdGhpcy5nZXRDZWxsKGkpLmNsYXNzTGlzdC5hZGQoJ3dpbm5lcicpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2V0VGltZW91dCh0aGlzLnJlc3RhcnQuYmluZCh0aGlzKSwgdGhpcy50cmFpbiA/IHRoaXMuc3BlZWQgOiAxMDAwKVxuXG5cblxuICAgICAgfVxuICAgIH0sXG5cbiAgICBhc3luYyBpbml0KCkge1xuICAgICAgLy8gdGhpcy5wbGF5KCk7XG4gICAgfSxcblxuICAgIHBsYXkoKSB7XG4gICAgICBpZiAodGhpcy50cmFpbikge1xuICAgICAgICB3aW5kb3cucGxheWVyV29ya2VyLnBvc3RNZXNzYWdlKFsgdGhpcy5hdXRvcGxheWVyLCB0aGlzLnN0YXRlLmpvaW4oJycpLCB0aGlzLnN0cmlrZVNpemUgXSlcbiAgICAgICAgLy8gbGV0IGNlbGxzID0gKEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI2dyaWQgZGl2W2RhdGEtZW1wdHk9XCIxXCJdJykpKTtcbiAgICAgICAgLy8gbGV0IG1vdmUgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjZWxscy5sZW5ndGgpXG4gICAgICAgIC8vIC8vIGNvbnNvbGUubG9nKGNlbGxzKVxuICAgICAgICAvLyBjZWxsc1ttb3ZlXSBcdTAwMjZcdTAwMjYgY2VsbHNbbW92ZV0uY2xpY2soKVxuICAgICAgfVxuICAgIH0sXG5cblxuICAgIHBhaW50KCkge1xuICAgICAgaWYgKHRydWUpIHtcbiAgICAgICAgZm9yIChsZXQgaSBpbiB0aGlzLnN0YXRlKSB7XG4gICAgICAgICAgbGV0IGNlbGwgPSB0aGlzLmdldENlbGwoaSlcbiAgICAgICAgICBpZiAoY2VsbCkge1xuICAgICAgICAgICAgY2VsbC5pbm5lckhUTUwgPSBgXHUwMDNjc3BhbiBjbGFzcz1cImNlbGwtcGxheWVkIGNlbGwtY29udGVudC0ke3RoaXMuc3RhdGVbaV19XCJcdTAwM2Uke3RoaXMuZ2V0U3ltYm9sKHRoaXMuc3RhdGVbaV0pfVx1MDAzYy9zcGFuXHUwMDNlYFxuICAgICAgICAgICAgY2VsbC5kYXRhc2V0LmVtcHR5ID0gdGhpcy5zdGF0ZVtpXSA9PSAyID8gMSA6IDBcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZ2V0U3ltYm9sKHgpIHtcbiAgICAgIHN3aXRjaCAoeCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgcmV0dXJuIFwiT1wiO1xuXG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICByZXR1cm4gXCJYXCI7XG5cbiAgICAgICAgY2FzZSAyOlxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBtb3ZlKCkge1xuICAgICAgbGV0IGNlbGwgPSBwYXJzZUludCh0aGlzLiRlbC5kYXRhc2V0LmNlbGwpIC0xO1xuICAgICAgd2luZG93LmdhbWVXb3JrZXIucG9zdE1lc3NhZ2UoWydNT1ZFJywgY2VsbF0pXG4gICAgfSxcblxuICAgIHRodW1ibmFpbChncmlkRGF0YSwgbW92ZSwgaHcpIHtcblxuICAgICAgY29uc3Qgc2l6ZSA9IE1hdGguc3FydChncmlkRGF0YS5sZW5ndGgpO1xuICAgICAgY29uc3Qgcm93cyA9IHNpemU7XG4gICAgICBjb25zdCBjb2xzID0gc2l6ZTtcblxuXG4gICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKVxuICAgICAgY2FudmFzLndpZHRoID0gaHdcbiAgICAgIGNhbnZhcy5oZWlnaHQ9IGh3XG4gICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgIGNvbnN0IGNlbGxTaXplID0gY2FudmFzLndpZHRoIC8gY29scztcblxuICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuXG4gICAgICAvLyBTZXQgbGluZSBwcm9wZXJ0aWVzIHRvIDNweCB0aGlja25lc3MgYW5kICNlNWU3ZWIgY29sb3JcbiAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICcjZTVlN2ViJztcbiAgICAgIGN0eC5saW5lV2lkdGggPSAzO1xuXG4gICAgICAvLyBWZXJ0aWNhbCBsaW5lcyAoZXhjbHVkaW5nIG91dGVyIGJvcmRlcnMpXG4gICAgICBmb3IgKGxldCBpID0gMTsgaSBcdTAwM2MgY29sczsgaSsrKSB7XG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgY3R4Lm1vdmVUbyhpICogY2VsbFNpemUsIDApO1xuICAgICAgICBjdHgubGluZVRvKGkgKiBjZWxsU2l6ZSwgY2FudmFzLmhlaWdodCk7XG4gICAgICAgIGN0eC5zdHJva2UoKTtcbiAgICAgIH1cblxuICAgICAgLy8gSG9yaXpvbnRhbCBsaW5lcyAoZXhjbHVkaW5nIG91dGVyIGJvcmRlcnMpXG4gICAgICBmb3IgKGxldCBpID0gMTsgaSBcdTAwM2Mgcm93czsgaSsrKSB7XG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgY3R4Lm1vdmVUbygwLCBpICogY2VsbFNpemUpO1xuICAgICAgICBjdHgubGluZVRvKGNhbnZhcy53aWR0aCwgaSAqIGNlbGxTaXplKTtcbiAgICAgICAgY3R4LnN0cm9rZSgpO1xuICAgICAgfVxuXG4gICAgICAvLyBEcmF3IGNlbGwgc3ltYm9scyBiYXNlZCBvbiB2YWx1ZXNcbiAgICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyBcdTAwM2Mgcm93czsgcm93KyspIHtcbiAgICAgICAgZm9yIChsZXQgY29sID0gMDsgY29sIFx1MDAzYyBjb2xzOyBjb2wrKykge1xuICAgICAgICAgIGNvbnN0IGluZGV4ID0gcm93ICogY29scyArIGNvbDtcbiAgICAgICAgICBjb25zdCB2YWx1ZSA9IGdyaWREYXRhW2luZGV4XTtcblxuICAgICAgICAgIC8vIENhbGN1bGF0ZSBjZW50ZXIgcG9zaXRpb24gYW5kIHNpemUgZm9yIHRoZSBjZWxsXG4gICAgICAgICAgY29uc3QgeCA9IGNvbCAqIGNlbGxTaXplICsgY2VsbFNpemUgLyAyO1xuICAgICAgICAgIGNvbnN0IHkgPSByb3cgKiBjZWxsU2l6ZSArIGNlbGxTaXplIC8gMjtcbiAgICAgICAgICBjb25zdCBzeW1ib2xTaXplID0gY2VsbFNpemUgKiAwLjY7IC8vIFNpemUgb2Ygc3ltYm9sIHJlbGF0aXZlIHRvIGNlbGxcblxuICAgICAgICAgIGlmICh2YWx1ZSA9PT0gMCkge1xuICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gaW5kZXggPT09IG1vdmUgPyAncmVkJyA6ICdncmV5JztcbiAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSAyO1xuICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgY3R4LmFyYyh4LCB5LCBzeW1ib2xTaXplIC8gMiwgMCwgTWF0aC5QSSAqIDIpO1xuICAgICAgICAgICAgY3R4LnN0cm9rZSgpO1xuICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT09IDEpIHtcbiAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSAyO1xuICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gaW5kZXggPT09IG1vdmUgPyAnYmx1ZScgOiAnZ3JleSc7XG4gICAgICAgICAgICAvLyBGaXJzdCBsaW5lIG9mIFhcbiAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIGN0eC5tb3ZlVG8oeCAtIHN5bWJvbFNpemUgLyAyLCB5IC0gc3ltYm9sU2l6ZSAvIDIpO1xuICAgICAgICAgICAgY3R4LmxpbmVUbyh4ICsgc3ltYm9sU2l6ZSAvIDIsIHkgKyBzeW1ib2xTaXplIC8gMik7XG4gICAgICAgICAgICBjdHguc3Ryb2tlKCk7XG5cbiAgICAgICAgICAgIC8vIFNlY29uZCBsaW5lIG9mIFhcbiAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIGN0eC5tb3ZlVG8oeCArIHN5bWJvbFNpemUgLyAyLCB5IC0gc3ltYm9sU2l6ZSAvIDIpO1xuICAgICAgICAgICAgY3R4LmxpbmVUbyh4IC0gc3ltYm9sU2l6ZSAvIDIsIHkgKyBzeW1ib2xTaXplIC8gMik7XG4gICAgICAgICAgICBjdHguc3Ryb2tlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIElmIHZhbHVlIGlzIDIsIGxlYXZlIHRoZSBjZWxsIGVtcHR5XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNhbnZhcztcbiAgICB9XG5cblxuICB9KSlcbn0pXG5cdTAwM2Mvc2NyaXB0XHUwMDNlXG5cblxuXG5cdTAwM2NkaXYgY2xhc3M9XCJjb250YWluZXIgbXQtMTAgcHktMjBcIlx1MDAzZVxuICBcdTAwM2NkaXYgaWQ9XCJjaGFydFwiIHN0eWxlPVwiaGVpZ2h0OiAzNzBweDsgd2lkdGg6IDEwMCU7XCJcdTAwM2VcdTAwM2MvZGl2XHUwMDNlXG5cdTAwM2MvZGl2XHUwMDNlXG5cblxuXHUwMDNjc2NyaXB0IGlzOmlubGluZVx1MDAzZVxuXG52YXIgZGF0YVBvaW50czEgPSBbXTtcbnZhciBkYXRhUG9pbnRzMiA9IFtdO1xudmFyIGRhdGFQb2ludHMzID0gW107XG5cbnZhciBjaGFydCA9IG5ldyBDYW52YXNKUy5DaGFydChcImNoYXJ0XCIsIHtcbiAgLy8gem9vbUVuYWJsZWQ6IHRydWUsXG4gIHRoZW1lOiBcImxpZ2h0MlwiLCAvLyBcImxpZ2h0MVwiLCBcImxpZ2h0MlwiLCBcImRhcmsxXCIsIFwiZGFyazJcIlxuICB0aXRsZToge1xuICAgIC8vIHRleHQ6IFwiU2hhcmUgVmFsdWUgb2YgVHdvIENvbXBhbmllc1wiXG4gIH0sXG4gIGF4aXNYOiB7XG4gICAgLy8gdGl0bGU6IFwiY2hhcnQgdXBkYXRlcyBldmVyeSAzIHNlY3NcIlxuICB9LFxuICB0b29sVGlwOiB7XG4gICAgc2hhcmVkOiB0cnVlXG4gIH0sXG4gIGxlZ2VuZDoge1xuICAgIGN1cnNvcjpcInBvaW50ZXJcIixcbiAgICB2ZXJ0aWNhbEFsaWduOiBcInRvcFwiLFxuICAgIGZvbnRTaXplOiAyMixcbiAgICBmb250Q29sb3I6IFwiZGltR3JleVwiLFxuICAgIGl0ZW1jbGljayA6IHRvZ2dsZURhdGFTZXJpZXNcbiAgfSxcbiAgZGF0YTogW3tcbiAgICB0eXBlOiBcImxpbmVcIixcbiAgICB4VmFsdWVUeXBlOiBcImRhdGVUaW1lXCIsXG4gICAgc2hvd0luTGVnZW5kOiB0cnVlLFxuICAgIG5hbWU6IFwiUGxheWVyXCIsXG4gICAgY29sb3I6IFwiI2ZiMmMzNlwiLFxuICAgIGRhdGFQb2ludHM6IGRhdGFQb2ludHMxXG4gICAgfSxcbiAgICB7XG4gICAgICB0eXBlOiBcImxpbmVcIixcbiAgICAgIHhWYWx1ZVR5cGU6IFwiZGF0ZVRpbWVcIixcbiAgICAgIHNob3dJbkxlZ2VuZDogdHJ1ZSxcbiAgICAgIG5hbWU6IFwiTWFjaGluZVwiICxcbiAgICAgIGNvbG9yOiBcIiMyYjdmZmZcIixcbiAgICAgIGRhdGFQb2ludHM6IGRhdGFQb2ludHMyXG4gIH0sICAgIHtcbiAgICAgIHR5cGU6IFwibGluZVwiLFxuICAgICAgeFZhbHVlVHlwZTogXCJkYXRlVGltZVwiLFxuICAgICAgc2hvd0luTGVnZW5kOiB0cnVlLFxuICAgICAgbmFtZTogXCJEcmF3c1wiICxcbiAgICAgIGNvbG9yOiBcIiM2YTcyODJcIixcbiAgICAgIGRhdGFQb2ludHM6IGRhdGFQb2ludHMzXG4gIH1dXG59KTtcblxuZnVuY3Rpb24gdG9nZ2xlRGF0YVNlcmllcyhlKSB7XG4gIGlmICh0eXBlb2YoZS5kYXRhU2VyaWVzLnZpc2libGUpID09PSBcInVuZGVmaW5lZFwiIHx8IGUuZGF0YVNlcmllcy52aXNpYmxlKSB7XG4gICAgZS5kYXRhU2VyaWVzLnZpc2libGUgPSBmYWxzZTtcbiAgfVxuICBlbHNlIHtcbiAgICBlLmRhdGFTZXJpZXMudmlzaWJsZSA9IHRydWU7XG4gIH1cbiAgY2hhcnQucmVuZGVyKCk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUNoYXJ0KHN0YXRzKSB7XG4gIGxldCB0aW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKClcblxuICBkYXRhUG9pbnRzMS5wdXNoKHtcbiAgICB4OiB0aW1lLFxuICAgIHk6IHBhcnNlSW50KHN0YXRzLnBsYXllciksXG4gICAgY29sb3I6IFwiI2ZiMmMzNlwiLFxuICB9KTtcbiAgZGF0YVBvaW50czIucHVzaCh7XG4gICAgeDogdGltZSxcbiAgICB5OiBwYXJzZUludChzdGF0cy5tYWNoaW5lKSxcbiAgICBjb2xvcjogXCIjMmI3ZmZmXCIsXG4gIH0pO1xuICBkYXRhUG9pbnRzMy5wdXNoKHtcbiAgICB4OiB0aW1lLFxuICAgIGNvbG9yOiBcIiM2YTcyODJcIixcbiAgICB5OiBwYXJzZUludChzdGF0cy5kcmF3cylcbiAgfSk7XG5cbiAgY2hhcnQucmVuZGVyKCk7XG59XG5cblxuXHUwMDNjL3NjcmlwdFx1MDAzZSJdLCAibWFwcGluZ3MiOiAiQUF3RUEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ25HLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNoRztBQUNBLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUU7QUFDekMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUM3RSxDQUFDO0FBQ0Q7QUFDQSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRTtBQUMzQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUMvRSxDQUFDO0FBQUE7IiwgIm5hbWVzIjogW10gfQ=="],"names":["event"],"mappings":"AAwEA,OAAO,aAAe,IAAI,OAAO,IAAkD,IAAA,6CAAA,YAAA,GAAA,EAAA,CAAC,KAAM,QAAA,CAAS,EACnG,OAAO,WAAa,IAAI,OAAO,IAAgD,IAAA,2CAAA,YAAA,GAAA,EAAA,CAAC,KAAM,QAAA,CAAS,EAE/F,OAAO,WAAW,UAAaA,GAAU,CAChC,OAAA,cAAc,IAAI,YAAY,UAAW,CAAE,OAAUA,EAAM,IAAK,CAAE,CAAC,CAC5E,EAEA,OAAO,aAAa,UAAaA,GAAU,CAClC,OAAA,cAAc,IAAI,YAAY,YAAa,CAAE,OAAUA,EAAM,IAAK,CAAE,CAAC,CAC9E"}